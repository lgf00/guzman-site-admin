[{"C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\reportWebVitals.js":"1","C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\index.js":"2","C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\App.js":"3","C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\components\\DnD.js":"4","C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\components\\AddModal.js":"5","C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\components\\EditModal.js":"6"},{"size":362,"mtime":1608859255799,"results":"7","hashOfConfig":"8"},{"size":2720,"mtime":1609111586801,"results":"9","hashOfConfig":"8"},{"size":5624,"mtime":1609188066672,"results":"10","hashOfConfig":"8"},{"size":4163,"mtime":1609047871771,"results":"11","hashOfConfig":"8"},{"size":2957,"mtime":1609111672856,"results":"12","hashOfConfig":"8"},{"size":3652,"mtime":1609111834360,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1n8szzt",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21","usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\reportWebVitals.js",[],["29","30"],"C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\index.js",[],"C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\App.js",["31"],"import React, { useState } from 'react';\nimport DnD from './components/DnD.js';\nimport AddModal from './components/AddModal.js';\nimport './App.css';\nimport EditModal from './components/EditModal.js';\nimport AWS from 'aws-sdk';\n\n// TODO: GET from s3 bucket(?)\n\n\n// async function getAlbumNames() {\n//   // await s3.listObjects({ Delimiter: \"/\" }, function (err, data) {\n//   //   if (err) {\n//   //     return alert(\"There was an error listing your albums: \" + err.message);\n//   //   } else {\n//   //     console.log(data);\n//   //     data.CommonPrefixes.forEach((commonPrefix) => {\n//   //       var prefix = commonPrefix.Prefix;\n//   //       var albumName = decodeURIComponent(prefix.replace(\"/\", \"\"));\n//   //       console.log(albumName);\n//   //       albumNames.push(albumName);\n//   //     });\n//   //     console.log(\"in getAlbumNames\", albumNames);\n//   //   }\n//   // }).promise();\n// }\n\n// async function getAlbumImages(albumName) {\n\n// }\n\nfunction App(props) {\n  const [albums, updateAlbums] = useState(props.albums);\n  const [addModal, showAddModal] = useState(false);\n  const [editModal, showEditModal] = useState(false);\n  const [editName, setEditName] = useState('');\n  const [editImages, setEditImages] = useState([]);\n\n  function createAlbumPromise(albumName) {\n    albumName = albumName.trim();\n    if (!albumName) {\n      return alert(\"Album names must contain at least one non-space character.\");\n    }\n    if (albumName.indexOf(\"/\") !== -1) {\n      return alert(\"Album names cannot contain slashes.\");\n    }\n    var albumKey = encodeURIComponent(albumName) + \"/\";\n    // props.s3.headObject({ Key: albumKey }, function(err, data) {\n    //   if (!err) {\n    //     return alert(\"Album already exists.\");\n    //   }\n    //   if (err.code !== \"NotFound\") {\n    //     return alert(\"There was an error creating your album: \" + err.message);\n    //   }\n    //   props.s3.putObject({ Key: albumKey }, function(err, data) {\n    //     if (err) {\n    //       return alert(\"There was an error creating your album: \" + err.message);\n    //     }\n    //     console.log(\"success creating album\", albumName);\n    //   });\n    // });\n    let headobjectPromise = props.s3.headObject({ Key: albumKey }).promise();\n    headobjectPromise.then((data) => {\n      console.log(\"object already exists: \", data);\n    }).catch((err) => {\n      return props.s3.putObject({ Key: albumKey }).promise();\n    })\n  }\n  \n  function addPhotoPromise(albumName, image) {\n    var file = image;\n    console.log(\"file\", file);\n    var fileName = file.name;\n    var albumPhotosKey = encodeURIComponent(albumName) + \"/\";\n  \n    var photoKey = albumPhotosKey + fileName;\n  \n    // Use S3 ManagedUpload class as it supports multipart uploads\n    var upload = new AWS.S3.ManagedUpload({\n      params: {\n        Bucket: \"albums-tara\",\n        Key: photoKey,\n        Body: file,\n        ACL: \"public-read\"\n      }\n    });\n    return upload.promise();;\n  }\n  \n  function deleteAlbum(albumName) {\n    console.log(\"in delete album\");\n    var albumKey = encodeURIComponent(albumName) + \"/\";\n    props.s3.listObjects({ Prefix: albumKey }, function(err, data) {\n      if (err) {\n        return alert(\"There was an error deleting your album: \", err.message);\n      }\n      var objects = data.Contents.map(function(object) {\n        return { Key: object.Key };\n      });\n      props.s3.deleteObjects(\n        {\n          Delete: { Objects: objects, Quiet: true }\n        },\n        function(err, data) {\n          if (err) {\n            return alert(\"There was an error deleting your album: \", err.message);\n          }\n          console.log(\"Successfully deleted album.\", albumName);\n        }\n      );\n    });\n  }\n  \n  function bigBoy(newAlbums, oldAlbumNames) {\n    newAlbums.forEach((album) => {\n      if (album.oldName === \"new\") {\n        // TODO: upload album and contents\n        let promises = [createAlbumPromise(album.name)];\n        album.images.forEach((image) => {\n          promises.push(addPhotoPromise(album.name, image));\n        })\n        Promise.all(promises).then(() => {\n          console.log(\"new album created, photos uploaded\");\n        }).catch((err) => {\n          console.log(\"an error occured creating your album and uploading images: \", err.message);\n        })\n      } else {\n        // check if album existed and was renamed\n        for (var i = 0; i < oldAlbumNames.length; i++) {\n          if (oldAlbumNames[i] === album.oldName && oldAlbumNames[i] !== album.name) {\n            // TODO: copy and rename objects\n            console.log(\"album already exists but was renamed\", album.name, album.oldName);\n            break;  \n          }\n        }\n        // TODO: handle content change\n        // requirements: All album \n      }\n    });\n  }\n\n    return (\n      <div className=\"App\">\n        <div className=\"container\">\n          {addModal && (<AddModal albums={albums} updateAlbums={updateAlbums} showAddModal={showAddModal}/>)}\n          {editModal && (<EditModal albums={albums} updateAlbums={updateAlbums} editName={editName} setEditName={setEditName} editImages={editImages} setEditImages={setEditImages} showEditModal={showEditModal}/>)}\n          <div className=\"controls\">\n            <button onClick={() => showAddModal(true)}> Add </button>\n            <button onClick={() => bigBoy(albums, props.oldAlbumNames)}> Save </button>\n          </div>\n          <div className=\"content\">\n            <DnD albums={albums} updateAlbums={updateAlbums} showEditModal={showEditModal} setEditName={setEditName} setEditImages={setEditImages}/>\n          </div>\n        </div>\n      </div>\n    );\n}\n\nexport default App;\n","C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\components\\DnD.js",[],["32","33"],"C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\components\\AddModal.js",[],"C:\\Users\\lgguf\\Documents\\dev\\guzman-site-admin\\src\\components\\EditModal.js",[],{"ruleId":"34","replacedBy":"35"},{"ruleId":"36","replacedBy":"37"},{"ruleId":"38","severity":1,"message":"39","line":90,"column":12,"nodeType":"40","messageId":"41","endLine":90,"endColumn":23},{"ruleId":"34","replacedBy":"42"},{"ruleId":"36","replacedBy":"43"},"no-native-reassign",["44"],"no-negated-in-lhs",["45"],"no-unused-vars","'deleteAlbum' is defined but never used.","Identifier","unusedVar",["44"],["45"],"no-global-assign","no-unsafe-negation"]